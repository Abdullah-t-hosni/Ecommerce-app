<section
  class="w-75 mx-auto  p-3 rounded-3 my-5"
  *ngIf="cartDetails; else msg"
>
  <div class="d-flex justify-content-between">
    <h1 class="mb-5">Cart Details</h1>
    <div class="p-0">
      <button class="btn btn-info mx-1">
        <a routerLink="/home">Continue Shopping</a>
      </button>
      <button (click)="clear()" class="btn btn-outline-danger">
        Clear Cart
      </button>
    </div>
  </div>
  <div class="d-flex justify-content-between align-items-center mb-5">

    <h4>
      Total Price:
      <span class="text-main">{{
        cartDetails.totalCartPrice | currency : "EUR"
      }}</span>
    </h4>
  </div>

  <div
    class="row border-bottom pb-2"
    *ngFor="let item of cartDetails.products | filterProducts"
  >
    <div
      class="col-md-1 p-2 cursor-pointer"
      [routerLink]="['/details', item.product._id]"
    >
      <img [src]="item.product.imageCover" class="w-100" [alt]="" />
    </div>
    <div class="col-md-11 mt-2">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h3 class="h6">{{ item.product.title | termtext : 5 }}</h3>
          <p class="text-main m-0">
            Price : {{ item.price | currency : "EUR" }}
          </p>
          <!-- <button
            (click)="removeFromCart(item.product._id)"
            class="btn p-0 m-0"
          >
            <i class="fas fa-trash-can"></i> Remove
          </button> -->
          <button (click)="removeFromCart(item.product._id)" class="button">
            <svg viewBox="0 0 448 512" class="svgIcon">
              <path
                d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"
              ></path>
            </svg>
          </button>
        </div>
        <div>

          <div class="number-control">
            <div
            (click)="changeCount(item.product._id, item.count - 1)"

            class="number-left"></div>

            <span class="mx-2">{{ item.count }}</span>
            <div
            (click)="changeCount(item.product._id, item.count + 1)"

            class="number-right"></div>
          </div>
          <!-- <button
            (click)="changeCount(item.product._id, item.count - 1)"
            class="btn border border-success"
          >
            <i class="fas fa-minus"></i>
          </button>
          <span class="mx-2">{{ item.count }}</span>
          <button
            (click)="changeCount(item.product._id, item.count + 1)"
            class="btn border border-success"
          >
            <i class="fas fa-plus"></i>
          </button> -->
        </div>
      </div>
    </div>
  </div>
  <button [routerLink]="['/checkout/', cartDetails._id]" class="Btn mt-1">
    <a > Buy Now </a>
    <svg class="svgIcon" viewBox="0 0 576 512">
      <path
        d="M512 80c8.8 0 16 7.2 16 16v32H48V96c0-8.8 7.2-16 16-16H512zm16 144V416c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V224H528zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H512c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm56 304c-13.3 0-24 10.7-24 24s10.7 24 24 24h48c13.3 0 24-10.7 24-24s-10.7-24-24-24H120zm128 0c-13.3 0-24 10.7-24 24s10.7 24 24 24H360c13.3 0 24-10.7 24-24s-10.7-24-24-24H248z"
      ></path>
    </svg>
  </button>
</section>

<ng-template #msg>
  <h2 class="text-center">Your Cart Is Empty...</h2>
</ng-template>
